<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hangman — Web Version</title>
  <style>
    :root {
      --bg: #f6f8fa;
      --card: #ffffff;
      --accent: #3b82f6;
      --danger: #ef4444;
      --muted: #6b7280;
      --radius: 12px;
    }

    html,body { height:100%; margin:0; font-family:Inter, system-ui, Arial; background:var(--bg); color:#111827;}
    .wrap { max-width:980px; margin:28px auto; padding:20px; display:grid; grid-template-columns: 1fr 360px; gap:20px; }
    .card { background:var(--card); border-radius:var(--radius); padding:18px; box-shadow: 0 6px 18px rgba(16,24,40,0.06);}
    header { grid-column: 1 / -1; display:flex; justify-content:space-between; align-items:center; gap:10px; margin-bottom:6px;}
    h1 { font-size:20px; margin:0; }
    .controls { display:flex; gap:8px; align-items:center; }

    /* Left: game area */
    .game-area { display:flex; flex-direction:column; gap:14px; }
    #hangmanSVG { width:100%; max-width:420px; height:300px; margin:auto; }
    .word { display:flex; gap:8px; justify-content:center; flex-wrap:wrap; font-size:28px; letter-spacing:2px; }
    .letter { min-width:26px; padding:4px 6px; border-bottom:3px solid #e5e7eb; text-transform:uppercase; text-align:center; }

    /* keyboard */
    .keyboard { display:grid; grid-template-columns: repeat(9, 1fr); gap:8px; margin-top:8px; }
    .key { padding:8px 6px; border-radius:8px; border:none; background:#f3f4f6; cursor:pointer; font-weight:600; user-select:none; }
    .key:disabled { opacity:0.45; cursor:default; }
    .key.correct { background: #bbf7d0; }
    .key.wrong { background: #fecaca; }

    /* right column: status */
    .status { display:flex; flex-direction:column; gap:12px; }
    .small { color:var(--muted); font-size:13px; }
    .row { display:flex; justify-content:space-between; align-items:center; }
    .badge { background:#eef2ff; color:var(--accent); padding:6px 10px; border-radius:999px; font-weight:700; }

    .wrong-letters { display:flex; gap:6px; flex-wrap:wrap; }
    .wrong-letters span { background:#fff5f5; color:var(--danger); padding:6px 8px; border-radius:8px; font-weight:600; }

    .btn { padding:8px 12px; border-radius:10px; border:none; cursor:pointer; background:var(--accent); color:white; font-weight:700; }
    .btn-muted { background:#f3f4f6; color:#111827; }
    .overlay {
      position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.45);
    }
    .overlay .panel { width:min(600px,92%); background:white; padding:22px; border-radius:12px; text-align:center; }
    .hint { font-size:13px; color:var(--muted); }

    @media (max-width:880px) {
      .wrap { grid-template-columns:1fr; }
      #hangmanSVG { height:220px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="card">
      <div>
        <h1>Hangman — Web Version</h1>
        <div class="small">Guess the word — type letters or click the keyboard. </div>
      </div>
      <div class="controls">
        <button id="newBtn" class="btn">New Game</button>
        <button id="hintBtn" class="btn btn-muted" title="Reveal one letter (costs 1 life)">Hint</button>
      </div>
    </header>

    <main class="card game-area">
      <!-- Hangman Drawing (SVG) -->
      <svg id="hangmanSVG" viewBox="0 0 200 200" aria-hidden="true">
        <!-- static stand -->
        <line x1="20" y1="180" x2="180" y2="180" stroke="#333" stroke-width="3" stroke-linecap="round"/>
        <line x1="50" y1="180" x2="50" y2="20" stroke="#333" stroke-width="3" stroke-linecap="round"/>
        <line x1="50" y1="20" x2="120" y2="20" stroke="#333" stroke-width="3" stroke-linecap="round"/>
        <line x1="120" y1="20" x2="120" y2="38" stroke="#333" stroke-width="3" stroke-linecap="round"/>
        <!-- hangman parts (hidden initially) -->
        <circle id="part0" cx="120" cy="52" r="12" stroke="#111827" stroke-width="3" fill="transparent" style="display:none"></circle>
        <line id="part1" x1="120" y1="64" x2="120" y2="100" stroke="#111827" stroke-width="3" style="display:none"></line>
        <line id="part2" x1="120" y1="74" x2="100" y2="88" stroke="#111827" stroke-width="3" style="display:none"></line>
        <line id="part3" x1="120" y1="74" x2="140" y2="88" stroke="#111827" stroke-width="3" style="display:none"></line>
        <line id="part4" x1="120" y1="100" x2="104" y2="128" stroke="#111827" stroke-width="3" style="display:none"></line>
        <line id="part5" x1="120" y1="100" x2="136" y2="128" stroke="#111827" stroke-width="3" style="display:none"></line>
      </svg>

      <!-- Word display -->
      <div id="word" class="word" aria-live="polite"></div>

      <!-- Keyboard -->
      <div id="keyboard" class="keyboard" aria-label="Letters"></div>
    </main>

    <aside class="card status">
      <div>
        <div class="row">
          <div class="small">Remaining lives</div>
          <div id="livesBadge" class="badge">6</div>
        </div>
        <div class="row" style="margin-top:10px;">
          <div class="small">Wrong letters</div>
          <div id="wrongLetters" class="wrong-letters"></div>
        </div>
      </div>

      <div>
        <div class="small">Stats (stored locally)</div>
        <div class="row" style="margin-top:8px;">
          <div>Wins: <strong id="wins">0</strong></div>
          <div>Losses: <strong id="losses">0</strong></div>
        </div>
      </div>

      <div style="margin-top:auto;">
        <div class="small hint">Tip: press a letter on your keyboard or click a key. Use "Hint" to reveal one unrevealed letter (costs 1 life).</div>
      </div>
    </aside>
  </div>

  <!-- Game over overlay -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true">
    <div class="panel">
      <h2 id="resultTitle">You win!</h2>
      <p id="resultText"></p>
      <button id="playAgain" class="btn">Play again</button>
    </div>
  </div>

  <script>
    /***********************
     * Simple word list — replace or extend with your own words.
     * Option: fetch words from a words.json (if you want a large list).
     ***********************/
    const WORDS = [
      "javascript","hangman","developer","frontend","variable","function",
      "programming","interface","algorithm","computer","debugging","syntax",
      "closure","promise","callback","object","array","string","condition","loop"
    ];

    const MAX_WRONG = 6; // number of allowed wrong guesses (matches 6 SVG parts)
    let secret = "";
    let guessed = new Set();
    let wrong = []; // wrong letters
    let gameOver = false;

    // cached DOM
    const wordEl = document.getElementById('word');
    const keyboardEl = document.getElementById('keyboard');
    const wrongLettersEl = document.getElementById('wrongLetters');
    const livesBadge = document.getElementById('livesBadge');
    const overlay = document.getElementById('overlay');
    const resultTitle = document.getElementById('resultTitle');
    const resultText = document.getElementById('resultText');
    const winsEl = document.getElementById('wins');
    const lossesEl = document.getElementById('losses');
    const hintBtn = document.getElementById('hintBtn');

    const parts = [];
    for (let i=0;i<MAX_WRONG;i++) {
      parts.push(document.getElementById('part'+i));
    }

    // Stats in localStorage
    function loadStats(){
      const s = JSON.parse(localStorage.getItem('hangmanStats') || '{}');
      winsEl.textContent = s.wins || 0;
      lossesEl.textContent = s.losses || 0;
    }
    function saveStats(winsDelta, lossesDelta) {
      const s = JSON.parse(localStorage.getItem('hangmanStats') || '{}');
      s.wins = (s.wins || 0) + (winsDelta || 0);
      s.losses = (s.losses || 0) + (lossesDelta || 0);
      localStorage.setItem('hangmanStats', JSON.stringify(s));
      loadStats();
    }

    // pick random word
    function pickWord() {
      return WORDS[Math.floor(Math.random()*WORDS.length)];
    }

    // start new game
    function startGame() {
      secret = pickWord().toLowerCase().trim();
      guessed = new Set();
      wrong = [];
      gameOver = false;
      overlay.style.display = 'none';
      resetParts();
      renderWord();
      renderKeyboard();
      updateStatus();
    }

    function resetParts(){
      parts.forEach(p => p.style.display = 'none');
    }

    function renderWord() {
      wordEl.innerHTML = '';
      for (const ch of secret) {
        const span = document.createElement('span');
        span.className = 'letter';
        span.textContent = guessed.has(ch) ? ch.toUpperCase() : ' ';
        if (!guessed.has(ch)) {
          span.style.borderBottom = "3px solid #e5e7eb";
        }
        wordEl.appendChild(span);
      }
    }

    function renderKeyboard() {
      keyboardEl.innerHTML = '';
      const A = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      for (const c of A) {
        const btn = document.createElement('button');
        btn.textContent = c;
        btn.className = 'key';
        btn.dataset.letter = c.toLowerCase();
        btn.onclick = () => handleGuess(c.toLowerCase());
        keyboardEl.appendChild(btn);
      }
      // disable keys that were guessed (useful when resuming)
      guessed.forEach(l => {
        const b = keyboardEl.querySelector(`[data-letter="${l}"]`);
        if (b) b.disabled = true;
      });
      wrong.forEach(l => {
        const b = keyboardEl.querySelector(`[data-letter="${l}"]`);
        if (b) { b.classList.add('wrong'); b.disabled = true; }
      });
    }

    function updateStatus() {
      livesBadge.textContent = Math.max(0, MAX_WRONG - wrong.length);
      wrongLettersEl.innerHTML = '';
      for (const l of wrong) {
        const sp = document.createElement('span');
        sp.textContent = l.toUpperCase();
        wrongLettersEl.appendChild(sp);
      }
    }

    function handleGuess(letter) {
      if (gameOver) return;
      if (guessed.has(letter) || wrong.includes(letter)) return;

      // disable corresponding key
      const btn = keyboardEl.querySelector(`[data-letter="${letter}"]`);
      if (btn) btn.disabled = true;

      if (secret.includes(letter)) {
        guessed.add(letter);
        if (btn) btn.classList.add('correct');
        renderWord();
      } else {
        wrong.push(letter);
        if (btn) btn.classList.add('wrong');
        updateHangman();
      }
      updateStatus();
      checkGameEnd();
    }

    function updateHangman() {
      // show parts equal to wrong.length
      parts.forEach((p,i) => p.style.display = (i < wrong.length) ? 'block' : 'none');
    }

    function checkGameEnd() {
      // win?
      const revealed = [...secret].every(ch => guessed.has(ch) || ch === ' ');
      if (revealed) {
        gameOver = true;
        resultTitle.textContent = "You won 🎉";
        resultText.innerHTML = `The word was <strong>${secret.toUpperCase()}</strong>. Great job!`;
        overlay.style.display = 'flex';
        saveStats(1,0);
        return;
      }
      // lose?
      if (wrong.length >= MAX_WRONG) {
        gameOver = true;
        resultTitle.textContent = "You lost 😞";
        resultText.innerHTML = `The correct word was <strong>${secret.toUpperCase()}</strong>. Try again!`;
        overlay.style.display = 'flex';
        // reveal word
        for (const ch of secret) guessed.add(ch);
        renderWord();
        saveStats(0,1);
      }
    }

    // keyboard events (physical keyboard)
    window.addEventListener('keydown', (e) => {
      const k = e.key;
      if (k.length === 1 && /[a-zA-Z]/.test(k)) {
        handleGuess(k.toLowerCase());
      }
    });

    // hint button: reveals one unrevealed letter but costs 1 life
    function giveHint() {
      if (gameOver) return;
      // find unrevealed letters
      const unrevealed = [...new Set(secret.split(''))].filter(ch => !guessed.has(ch));
      if (unrevealed.length === 0) return;
      // reveal random one
      const reveal = unrevealed[Math.floor(Math.random() * unrevealed.length)];
      guessed.add(reveal);
      // cost 1 life: add a dummy wrong entry (we'll add a char not in alphabet)
      wrong.push('#'); // will show as # in wrong letters; we hide '#' in the UI instead
      // remove the display of '#' from wrong letters by replacing last element with text "HINT"
      wrong[wrong.length-1] = 'HINT';
      // update keyboard states (disable the revealed letter key)
      const b = keyboardEl.querySelector(`[data-letter="${reveal}"]`);
      if (b) { b.classList.add('correct'); b.disabled = true; }
      renderWord();
      updateHangman();
      updateStatus();
      checkGameEnd();
    }

    // UI hooks
    document.getElementById('newBtn').addEventListener('click', startGame);
    document.getElementById('playAgain').addEventListener('click', startGame);
    hintBtn.addEventListener('click', () => {
      // confirm hint usage
      if (confirm("Reveal one letter? This will cost 1 life.")) giveHint();
    });

    // init
    loadStats();
    startGame();
  </script>
</body>
</html>
